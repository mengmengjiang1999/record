# week8

20240415-20240421

### LibAFL-QEMU论文

感觉也不用仔细看了。都是讲具体设计的。值得关注的点有几个：

1. 关于工作的主要贡献

- 把qemu包装成一个库
- 避免对原始QEMU代码库进行过多的更改，以最小化从更近期的上游提交合并时的冲突数量


2. 有趣的功能

Hooking System

在这篇文章中，"hooking"是指在软件执行过程中的特定点插入自定义代码或逻辑的一种技术。这些插入点通常是在执行关键操作、系统调用、指令执行或其他重要事件之前或之后。通过hooking，研究人员或开发者能够监控和修改程序的行为，而不需要更改程序的原始代码。

在模糊测试（fuzzing）的上下文中，hooking用于实现对目标程序的监控和控制，以便在模糊测试过程中进行有效的覆盖率跟踪、异常检测、状态保存和恢复等。例如，可以设置钩子来记录程序执行的每个分支或比较操作，以帮助发现潜在的代码覆盖区域或未被测试到的路径。此外，钩子还可以用于在程序执行到特定状态时触发快照保存，以便在发生崩溃或其他异常时能够快速恢复到该状态，从而提高模糊测试的效率和有效性。

在LIBAFL QEMU中，hooking系统允许用户定义自定义钩子来处理内存操作、系统调用、指令执行等事件，这些钩子以C函数的形式存在，可以通过Rust库的API进行配置和管理。这样，LIBAFL QEMU提供了一种灵活的方式来扩展和定制模糊测试过程，以适应不同的测试需求和目标程序的特性。

### 关于LibAFL fuzzing zCore

参照fuzzing101的做法去fuzzing zcore。zcore已经编译好而且可以正常在命令行跑busybox，而且busybox的路径也进行了一定修改之后仍然可以在命令行启动。这里是为了模仿xpdf的做法。

其中修改了zCore的部分代码和readme.md，修改的部分放在仓库里了。

https://github.com/mengmengjiang1999/zCore

fuzzing的代码放在这里：

https://github.com/mengmengjiang1999/zcore-test


目前的问题：其他步骤都和fuzzing xpdf一致了，但是发现没有办法启动forkserver，报错是unknown不知道具体原因。现在希望能知道问题在哪里，计划的做法是修改LibAFL/libafl/src/executors/forkserver.rs部分代码来输出报错然后进一步定位


新进展：

fuzzing-101里面对xpdf做fuzzing的时候，实际上并不是对二进制进行的插桩而是对源码进行的插桩。源码是C。

也就是说不能直接拿来抄······此处应该有那个麻中麻中麻的表情包。看样子抄之前还是应该先知道一下自己抄的是什么东西。

实际上即使是qemu_systemmode，要fuzzing的代码也是C代码。真的可以fuzzing rust部分吗。

先鸽着吧。先看看论文调理调理。

### kAFL

详情见另一篇文档

